{"version":3,"sources":["logo.svg","components/Header.js","components/GitHub.svg","components/Footer.js","components/Loading.js","App.js","reportWebVitals.js","index.js","model/index.js","stores/user.js","stores/auth.js","stores/image.js","stores/history.js","stores/index.js"],"names":["Header","styled","header","Logo","NavLink","StyledLink","Login","div","StyledButton","Button","Component","observer","history","useHistory","useStores","AuthStore","UserStore","useEffect","pullUser","to","activeClassName","exact","currentUser","attributes","username","type","shape","onClick","logout","console","log","push","Footer","footer","FootA","a","FootImg","img","src","gitIcon","href","Home","lazy","Register","History","About","NoMatch","App","fallback","Loading","path","component","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","AV","init","appId","appKey","serverURL","Auth","register","password","user","User","setUsername","setPassword","Promise","resolve","reject","signUp","loginedUser","error","login","logIn","getCurrentUser","current","logOut","Uploader","add","file","filename","item","Object","avFile","File","set","save","serverFile","find","page","limit","query","Query","include","skip","descending","equalTo","results","catch","delete","picId","createWithoutData","destroy","this","observable","action","isLogin","values","err","resetUser","newFilename","newFile","isUploading","finally","my","newList","list","concat","isLoading","append","length","hasMore","message","index","result","temp","splice","info","context","createContext","ImageStore","HistoryStore","window","stores","useContext"],"mappings":"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","file":"static/js/main.43a9445a.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import React, {useEffect} from \"react\";\r\nimport styled from 'styled-components'\r\nimport LogoUrl from './logo192.png';\r\nimport {NavLink, useHistory,} from \"react-router-dom\";\r\nimport {Button} from \"antd\";\r\nimport {useStores} from \"../stores\";\r\nimport {observer} from 'mobx-react'\r\n\r\n\r\nconst Header = styled.header`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 10px 100px;\r\n  background-color: white;\r\n  box-shadow: 0 0 8px 0 rgba(28,31,33,.1);\r\n`\r\nconst Logo = styled(NavLink)`\r\n  font-size: 18px;\r\n  color:  #004fff;\r\n`\r\nconst StyledLink = styled(NavLink)`\r\n  color: #423f3f;\r\n  margin-left: 30px;\r\n\r\n  &.active {\r\n    color:#004fff;\r\n    padding-bottom: 2px;\r\n    border-bottom: 2px solid #4680ff;\r\n  }\r\n`\r\nconst  Login = styled.div`\r\n  //margin-left: auto;\r\n`\r\nconst  StyledButton = styled(Button)`\r\n  margin-left: 10px;\r\n`\r\n\r\nconst Component = observer(()=>{\r\n    const history = useHistory()\r\n    const {AuthStore,UserStore} = useStores()\r\n\r\n    const handleLogin = ()=>{\r\n        console.log('跳转登录也');\r\n        history.push('/login')\r\n    }\r\n    const handleRegister = ()=>{\r\n        console.log('跳转注册页');\r\n        history.push('/register')\r\n    }\r\n    const handleLogout = ()=>{\r\n        AuthStore.logout()\r\n    }\r\n    useEffect(()=>{\r\n      UserStore.pullUser();\r\n    },[])\r\n    // console.log('111');\r\n    // console.log(UserStore);\r\n    return(\r\n        <Header>\r\n            <nav>\r\n                <StyledLink to='/' activeClassName='active' exact>首页</StyledLink>\r\n                <StyledLink to='/history' activeClassName='active' >历史</StyledLink>\r\n                <StyledLink to='/about' activeClassName='active' >关于</StyledLink>\r\n            </nav>\r\n            <Logo to='/' activeClassName='active' exact>PicBed</Logo>\r\n            <Login>{\r\n                    UserStore.currentUser ?\r\n                    <>\r\n                    你好！{UserStore.currentUser.attributes.username}\r\n                        <StyledButton type=\"primary\" shape=\"round\" onClick={handleLogout}>注销</StyledButton>\r\n                    </>\r\n                    :\r\n                    <>\r\n                        <StyledButton type=\"primary\" shape=\"round\" onClick={handleLogin}>\r\n                            登录\r\n                        </StyledButton>\r\n                        <StyledButton type=\"primary\" shape=\"round\"  onClick={handleRegister}>\r\n                            注册\r\n                        </StyledButton>\r\n                    </>\r\n            }\r\n\r\n            </Login>\r\n        </Header>\r\n    )\r\n})\r\nexport default Component\r\n","export default __webpack_public_path__ + \"static/media/GitHub.df7e5ae8.svg\";","import React from \"react\";\r\nimport styled from 'styled-components'\r\nimport gitIcon from './GitHub.svg'\r\n\r\nconst Footer = styled.footer`\r\n  padding: 10px 100px;\r\n  text-align: center;\r\n  font-size: 12px;\r\n  color: #aaa;\r\n  display: flex;\r\n  justify-content: center;\r\n`\r\nconst FootA = styled.a`\r\n  color: #24292f;\r\n  font-size: 16px;\r\n`\r\nconst FootImg = styled.img`\r\n  height: 24px;\r\n  margin-right: 4px;\r\n`\r\n\r\nfunction Component(){\r\n    return(\r\n        <Footer>\r\n            <FootImg src={gitIcon}/>\r\n            <FootA href={'https://github.com/codenotkey/picBed'}>项目源码</FootA>\r\n        </Footer>\r\n    )\r\n}\r\nexport default Component\r\n","import React from \"react\";\r\n\r\nfunction Component(){\r\n    return(\r\n        <div>加载中</div>\r\n    )\r\n}\r\nexport  default Component\r\n\r\n","import logo from './logo.svg';\nimport './App.css';\nimport React, {Suspense,lazy} from \"react\";\n\n\nimport Header from \"./components/Header\";\nimport Footer from \"./components/Footer\";\nimport Loading from \"./components/Loading\";\n\nimport {Switch,Route} from 'react-router-dom';\n\nconst Home = lazy(() => import('./pages/Home'));\nconst Login = lazy(() => import('./pages/Login'));\nconst Register = lazy( ()=> import('./pages/Register'))\nconst History = lazy( ()=> import('./pages/History'))\nconst About = lazy( ()=> import('./pages/About'))\nconst NoMatch = lazy(()=>import('./pages/404'))\n// import Home from './pages/Home';\n\nfunction App() {\n  return (\n    <>\n      <Header/>\n      <main>\n        <Suspense fallback={<Loading/>}>\n          <Switch>\n            <Route path=\"/\" exact component={Home} />\n            <Route path=\"/login\"  component={Login} />\n            <Route path={'/register'} component={Register} />\n            <Route path={'/history'} component={History} />\n            <Route path={'/about'} component={About} />\n            <Route path=\"*\" component={NoMatch}/>\n          </Switch>\n        </Suspense>\n      </main>\n      <Footer/>\n    </>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {HashRouter as Router} from 'react-router-dom'\nimport 'antd/dist/antd.css'\n\nReactDOM.render(\n  <React.StrictMode>\n      <Router>\n          <App />\n      </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import AV , {Query, User} from 'leancloud-storage'\r\nimport resolve from \"resolve\";\r\n\r\nAV.init({\r\n    appId:'qUoILAETnUgzCrW0yiziLHlw-MdYXbMMI',\r\n    appKey:'NgDxLfs1De0WmqEoLr8bGn6m',\r\n    serverURL:'https://quoilaet.api.lncldglobal.com'\r\n})\r\n\r\nconst Auth = {\r\n    register(username,password){\r\n        let user = new User()\r\n        user.setUsername(username)\r\n        user.setPassword(password)\r\n        return new Promise((resolve,reject)=>{\r\n            user.signUp().then(loginedUser => resolve(loginedUser),\r\n                error =>reject(error)\r\n                )\r\n        })\r\n    },\r\n    login(username,password) {\r\n        return new Promise((resolve,reject)=>{\r\n            User.logIn(username,password).then(loginedUser=>resolve(loginedUser),error => reject(error))\r\n        })\r\n    },\r\n    getCurrentUser(){\r\n        return User.current()\r\n    },\r\n    logout(){\r\n        User.logOut()\r\n    }\r\n}\r\n\r\nconst Uploader = {\r\n    add(file,filename){\r\n        // avFile.save(\r\n        //         {\r\n        //             onprogress: (progress) => {\r\n        //                 fielUrl = progress.percent\r\n        //                 console.log(progress.percent);\r\n        //                 console.log('保持中');\r\n        //             }\r\n        //         }\r\n        // ).then((file) => {\r\n        //     file.url()\r\n        // }, (error) => {\r\n        //     console.log(error)\r\n        // });\r\n\r\n        const item = new AV.Object('Image');\r\n        const avFile = new AV.File(filename, file);\r\n        item.set('filename', filename);\r\n        item.set('owner', AV.User.current());\r\n        item.set('url', avFile);\r\n        return new Promise((resolve,reject)=>{\r\n            item.save().then(serverFile => resolve(serverFile),error => reject(error))\r\n        })\r\n    },\r\n    find({page=0,limit=10}){\r\n        const query = new AV.Query('Image')\r\n        query.include('owner')\r\n        query.limit(limit)\r\n        query.skip(page*limit)\r\n        query.descending('createdAt')\r\n        query.equalTo('owner', AV.User.current())\r\n        return new Promise((resolve,reject)=>{\r\n            query.find()\r\n                .then(results => resolve(results))\r\n                .catch(error => reject(error))\r\n        })\r\n    },\r\n    delete(picId){\r\n        const item = AV.Object.createWithoutData('Image', picId);\r\n        item.destroy();\r\n        return new  Promise((resolve,reject)=>{\r\n            item.destroy().then(()=> resolve('删除成功'))\r\n                          .catch(error => reject(error))\r\n        })\r\n    }\r\n}\r\nexport {Auth,Uploader}\r\n","import {action, observable} from \"mobx\";\r\nimport {Auth} from \"../model\";\r\n\r\nclass UserStore{\r\n    @observable currentUser = null\r\n\r\n    @action pullUser(){\r\n        this.currentUser = Auth.getCurrentUser()\r\n    }\r\n\r\n    @action resetUser(){\r\n        this.currentUser = null\r\n    }\r\n}\r\n\r\nexport  default  new UserStore()\r\n","import {observable, action} from 'mobx'\r\nimport {Auth} from \"../model\";\r\nimport UserStore from './user'\r\n\r\n\r\nclass AuthStore {\r\n    @observable isLogin = false\r\n    @observable isLoading = false\r\n    @observable values = {\r\n        username:'chensen',\r\n        password:''\r\n    }\r\n\r\n    @action setIsLogin(isLogin){\r\n        this.isLogin = isLogin\r\n    }\r\n\r\n    @action setUsername(username){\r\n        this.values.username = username\r\n    }\r\n\r\n    @action setPassword(password){\r\n        this.values.password = password\r\n    }\r\n\r\n    @action login(){\r\n        console.log('登录中')\r\n       return new Promise((resolve,reject)=>{\r\n           Auth.login(this.values.username,this.values.password)\r\n           .then(user=>{\r\n               UserStore.pullUser()\r\n               resolve(user)\r\n           }).catch(err=>{\r\n               UserStore.resetUser()\r\n               reject(err)\r\n           })\r\n       })\r\n    }\r\n\r\n    @action register(){\r\n        return new Promise((resolve,reject)=>{\r\n            Auth.register(this.values.username,this.values.password)\r\n                .then(user=>{\r\n                    UserStore.pullUser();\r\n                    resolve(user)\r\n                }).catch(err=>{\r\n                    UserStore.resetUser()\r\n                    reject(err)\r\n            })\r\n        })\r\n    }\r\n\r\n    @action logout(){\r\n        Auth.logout()\r\n        UserStore.resetUser()\r\n    }\r\n}\r\nexport default new AuthStore()\r\n","import {action, observable} from \"mobx\";\r\nimport {Uploader} from '../model'\r\n\r\nclass ImageStore{\r\n    @observable filename = ''\r\n    @observable file = null\r\n    @observable isUploading = false\r\n    @observable serverFile = null\r\n\r\n    @action setFilename(newFilename){\r\n        this.filename = newFilename\r\n    }\r\n\r\n    @action setFile(newFile){\r\n        this.file = newFile\r\n    }\r\n\r\n    @action upload(){\r\n        this.isUploading = true\r\n        return new Promise((resolve,reject)=>{\r\n           Uploader.add(this.file,this.filename)\r\n               .then(serverFile => {\r\n                   this.serverFile = serverFile\r\n                   resolve(serverFile)\r\n               })\r\n               .catch(err=>{\r\n                   console.log('上传在调用阶段失败')\r\n                   reject(err)\r\n               }).finally(()=>{\r\n                   this.isUploading = false\r\n           })\r\n        })\r\n    }\r\n}\r\n\r\nexport default new ImageStore()\r\n","import {action, observable} from \"mobx\";\r\nimport {Uploader} from \"../model\";\r\nimport {message} from \"antd\";\r\nimport React from \"react\";\r\n\r\nclass historyStore{\r\n    @observable list = []\r\n    @observable isLoading = false\r\n    @observable hasMore = true\r\n    @observable page = 0\r\n    my = []\r\n    limit = 10\r\n\r\n    @action append(newList){\r\n        this.list = this.list.concat(newList)\r\n    }\r\n\r\n    @action find(){\r\n        console.log('触发查找方法')\r\n        this.isLoading = true\r\n        Uploader.find({page:this.page,limit:this.limit})\r\n            .then(newList =>{\r\n                this.append(newList)\r\n                this.page ++\r\n                if(newList.length<this.limit){\r\n                    this.hasMore = false\r\n                }\r\n                // console.log(this.list)\r\n\r\n            })\r\n            .catch(error =>{\r\n                message.error('数据加载失败')\r\n            })\r\n            .finally(()=>{\r\n                this.isLoading = false\r\n            })\r\n    }\r\n\r\n    @action deleteItem(picId,index){\r\n        Uploader.delete(picId)\r\n            .then(result =>{\r\n                let temp =  [...this.list]\r\n                temp.splice(index,1)\r\n                this.list = temp\r\n                message.info('删除成功')\r\n            })\r\n            .catch((error)=>{\r\n                console.log(error)\r\n            })\r\n    }\r\n\r\n    // @action add(){\r\n    //     this.my.splice(1,1)\r\n    // }\r\n\r\n    @action reset(){\r\n        this.list = []\r\n        this.isLoading = false\r\n        this.hasMore = true\r\n        this.page = 0\r\n    }\r\n\r\n}\r\n\r\nexport  default  new historyStore()\r\n","import AuthStore from \"./auth\";\r\nimport UserStore from './user'\r\nimport ImageStore from './image'\r\nimport HistoryStore from './history'\r\nimport React , {useContext, createContext} from \"react\";\r\n\r\nconst context = createContext({\r\n    AuthStore,\r\n    UserStore,\r\n    ImageStore,\r\n    HistoryStore\r\n})\r\nwindow.stores = {\r\n    AuthStore,\r\n    UserStore,\r\n    ImageStore,\r\n    HistoryStore\r\n};\r\n\r\nexport const useStores = () => useContext(context)\r\n"],"sourceRoot":""}