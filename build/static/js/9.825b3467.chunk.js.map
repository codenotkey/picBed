{"version":3,"sources":["components/List.js","pages/History.js"],"names":["Img","styled","img","Component","observer","HistoryStore","useStores","useEffect","reset","initialLoad","pageStart","loadMore","find","hasMore","isLoading","useWindow","dataSource","list","renderItem","item","index","Item","actions","type","onClick","value","attributes","url","copy","message","info","danger","picId","console","log","deleteItem","handleDelete","id","Meta","avatar","src","title","href","filename","description","tip","History","List"],"mappings":"8OASMA,EAAMC,IAAOC,IAAV,iHAqEMC,EA9DGC,aAAS,WACvB,IAAOC,EAAgBC,cAAhBD,aAEPE,qBAAU,WACN,OAAO,WACHF,EAAaG,WAEnB,IAoBF,OACI,gCACI,0DACA,cAAC,IAAD,CACIC,aAAa,EACbC,UAAW,EACXC,SAxBK,WACbN,EAAaO,QAwBLC,SAAUR,EAAaS,WAAWT,EAAaQ,QAC/CE,WAAW,EALf,SAOI,cAAC,IAAD,CACIC,WAAYX,EAAaY,KACzBC,WAAY,SAACC,EAAKC,GAAN,OACR,cAAC,IAAKC,KAAN,CAAuBC,QAAS,CACxB,cAAC,IAAD,CAAQC,KAAM,OAAiCC,QAAS,kBAvBjEC,EAuBgFN,EAAKO,WAAWC,IAAID,WAAWC,IAtB9HC,IAAKH,QACLI,IAAQC,KAAK,wCAFC,IAACL,GAuBS,qCAA0B,sBAC1B,cAAC,IAAD,CAAQF,KAAM,OAAQQ,QAAM,EAA0BP,QAAS,kBApBvE,SAACQ,EAAMZ,GACvBa,QAAQC,IAAI,gBAAgBd,GAC5Bf,EAAa8B,WAAWH,EAAMZ,GAkB6DgB,CAAajB,EAAKkB,GAAGjB,IAAxF,qCAAiC,uBAFzC,SAII,cAAC,IAAKC,KAAKiB,KAAX,CACIC,OAAQ,cAACvC,EAAD,CAAKwC,IAAKrB,EAAKO,WAAWC,IAAID,WAAWC,MACjDc,MAAO,mBAAGC,KAAMvB,EAAKO,WAAWC,IAAID,WAAWC,IAAxC,SAA8CR,EAAKO,WAAWiB,WACrEC,YAAazB,EAAKO,WAAWC,IAAID,WAAWC,OAPpCP,IAHxB,SAeMf,EAAaS,WAAaT,EAAaQ,SACrC,8BACI,cAAC,IAAD,CAAMgC,IAAI,mCC3DvBC,UAPf,WACI,OACI,mCACI,cAACC,EAAD","file":"static/js/9.825b3467.chunk.js","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport {observer} from \"mobx-react\";\r\nimport {useStores} from \"../stores\";\r\nimport {List,Spin,Button,Popconfirm,message} from 'antd'\r\nimport styled from \"styled-components\";\r\nimport InfiniteScroll from 'react-infinite-scroller';\r\nimport copy from 'copy-to-clipboard';\r\n\r\n\r\nconst Img = styled.img`\r\n  width: 100px;\r\n  height: 100%;\r\n  object-fit: contain;\r\n  border: 1px solid #eee;\r\n`;\r\n\r\nconst Component = observer(()=>{\r\n    const {HistoryStore} = useStores()\r\n\r\n    useEffect(()=>{\r\n        return ()=>{\r\n            HistoryStore.reset()\r\n        }\r\n    },[])\r\n\r\n    const loadMore = ()=>{\r\n        HistoryStore.find()\r\n    }\r\n\r\n    // const [list,setList] = useState(HistoryStore.list)\r\n    // console.log('----1');\r\n    // console.log(list);\r\n    // console.log('----2');\r\n    // console.log(HistoryStore.list)\r\n    const handleCopy= (value) =>{\r\n        copy(value)\r\n        message.info('链接复制成功')\r\n    }\r\n    const handleDelete =(picId,index) =>{\r\n        console.log('this is index'+index)\r\n        HistoryStore.deleteItem(picId,index)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h1>上传历史</h1>\r\n            <InfiniteScroll\r\n                initialLoad={true}\r\n                pageStart={0}\r\n                loadMore={loadMore}\r\n                hasMore={!HistoryStore.isLoading&&HistoryStore.hasMore}\r\n                useWindow={true}\r\n            >\r\n                <List\r\n                    dataSource={HistoryStore.list}\r\n                    renderItem={(item,index) =>\r\n                        <List.Item key={index} actions={[\r\n                                <Button type={'link'} key=\"list-loadmore-edit\" onClick={()=>handleCopy(item.attributes.url.attributes.url)}>复制链接</Button>,\r\n                                <Button type={'link'} danger key=\"list-loadmore-more\" onClick={()=>handleDelete(item.id,index)} >删除图片</Button>\r\n                        ]}>\r\n                            <List.Item.Meta\r\n                                avatar={<Img src={item.attributes.url.attributes.url} />}\r\n                                title={<a href={item.attributes.url.attributes.url}>{item.attributes.filename}</a>}\r\n                                description={item.attributes.url.attributes.url}\r\n                            />\r\n                        </List.Item>\r\n                    }\r\n                >\r\n                    { HistoryStore.isLoading && HistoryStore.hasMore && (\r\n                        <div>\r\n                            <Spin tip=\"加载中\"/>\r\n                        </div>\r\n                    )}\r\n                </List>\r\n            </InfiniteScroll>\r\n        </div>\r\n    )\r\n})\r\nexport default Component\r\n","import React from \"react\";\r\nimport {observable} from \"mobx\";\r\nimport List from '../components/List'\r\n\r\nfunction History(){\r\n    return(\r\n        <>\r\n            <List/>\r\n        </>\r\n    )\r\n}\r\nexport default History\r\n"],"sourceRoot":""}