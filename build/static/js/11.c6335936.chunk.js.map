{"version":3,"sources":["pages/Login.js"],"names":["Content","styled","div","Title","h1","Component","observer","AuthStore","useStores","history","useHistory","name","labelCol","span","wrapperCol","initialValues","remember","onFinish","values","setUsername","username","setPassword","password","login","then","console","log","push","catch","e","message","error","onFinishFailed","errorInfo","Item","label","style","width","rules","required","validator","rule","value","test","Promise","reject","resolve","min","max","Password","offset","type","htmlType"],"mappings":"qNAQMA,EAAUC,IAAOC,IAAV,8SAcPC,EAAQF,IAAOG,GAAV,mDAILC,EAAYC,aAAS,WACvB,IAAOC,EAAaC,cAAbD,UACDE,EAAUC,cAsBhB,OACI,eAACV,EAAD,WACI,cAACG,EAAD,2BACA,eAAC,IAAD,CACIQ,KAAK,QACLC,SAAU,CAAEC,KAAM,GAClBC,WAAY,CAAED,KAAM,IACpBE,cAAe,CAAEC,UAAU,GAC3BC,SA7BK,SAACC,GACdX,EAAUY,YAAYD,EAAOE,UAC7Bb,EAAUc,YAAYH,EAAOI,UAC7Bf,EAAUgB,QACLC,MAAK,WACFC,QAAQC,IAAI,kCACZjB,EAAQkB,KAAK,QACdC,OAAM,SAACC,GACNJ,QAAQC,IAAIG,GACZC,IAAQC,MAAM,gCAqBdC,eAjBW,SAACC,GACpBR,QAAQC,IAAI,UAAWO,IAUnB,UAQI,cAAC,IAAKC,KAAN,CACIC,MAAM,qBACNxB,KAAK,WACLyB,MAAO,CAAEC,MAAO,KAChBC,MAAO,CACH,CAAEC,UAAU,EAAMT,QAAS,8CAC3B,CAACU,UAtBI,SAACC,EAAKC,GAC3B,MAAG,KAAKC,KAAKD,GAAeE,QAAQC,OAAO,wFACpCD,QAAQE,aAcP,SAWI,cAAC,IAAD,MAGJ,cAAC,IAAKZ,KAAN,CACIC,MAAM,eACNxB,KAAK,WACL2B,MAAO,CACH,CAAEC,UAAU,EAAMT,QAAS,wCAC3B,CAACiB,IAAI,EAAEjB,QAAQ,mCACf,CAACkB,IAAI,GAAGlB,QAAQ,qCANxB,SASI,cAAC,IAAMmB,SAAP,MAGJ,cAAC,IAAKf,KAAN,CAAWpB,WAAY,CAAEoC,OAAQ,EAAGrC,KAAM,IAA1C,SACI,cAAC,IAAD,CAAQsC,KAAK,UAAUC,SAAS,SAAhC,qCASH/C","file":"static/js/11.c6335936.chunk.js","sourcesContent":["import React from \"react\";\r\nimport {observer} from \"mobx-react\";\r\nimport {useStores} from \"../stores\";\r\nimport {Form, Input, Checkbox, Button, message} from \"antd\";\r\nimport styled from \"styled-components\";\r\nimport {Auth} from \"../model\";\r\nimport {useHistory} from 'react-router-dom'\r\n\r\nconst Content = styled.div`\r\n  max-width: 600px;\r\n  margin: 10vh auto ;\r\n  box-shadow: 0 4px 8px 0 rgba(28,31,33,.1);\r\n  padding: 20px;\r\n  border-radius: 12px;\r\n  border: none;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: column;\r\n  background-color: white;\r\n`\r\n\r\nconst Title = styled.h1`\r\n  text-align: center;\r\n`\r\n\r\nconst Component = observer(()=>{\r\n    const {AuthStore} = useStores()\r\n    const history = useHistory()\r\n    const onFinish = (values) => {\r\n        AuthStore.setUsername(values.username)\r\n        AuthStore.setPassword(values.password)\r\n        AuthStore.login()\r\n            .then(()=>{\r\n                console.log('登录成功！');\r\n                history.push('/')\r\n            }).catch((e)=>{\r\n                console.log(e)\r\n                message.error('登录失败')\r\n        })\r\n    };\r\n\r\n    const onFinishFailed = (errorInfo) => {\r\n        console.log('Failed:', errorInfo);\r\n    };\r\n    const validateUsername = (rule,value)=>{\r\n        if(/\\W/.test(value)) return Promise.reject('用户名只可以包含字母和下划线')\r\n        return Promise.resolve()\r\n    }\r\n\r\n    return (\r\n        <Content>\r\n            <Title>登录</Title>\r\n            <Form\r\n                name=\"basic\"\r\n                labelCol={{ span: 6 }}\r\n                wrapperCol={{ span: 18}}\r\n                initialValues={{ remember: true }}\r\n                onFinish={onFinish}\r\n                onFinishFailed={onFinishFailed}\r\n            >\r\n                <Form.Item\r\n                    label=\"用户名\"\r\n                    name=\"username\"\r\n                    style={{ width: 360 }}\r\n                    rules={[\r\n                        { required: true, message: '请输入用户名！' },\r\n                        {validator:validateUsername},\r\n                        // {min:4,message:'最小4个字符'},\r\n                        // {min:10,message:'最大10个字符'},\r\n                    ]}\r\n                >\r\n                    <Input />\r\n                </Form.Item>\r\n\r\n                <Form.Item\r\n                    label=\"密码\"\r\n                    name=\"password\"\r\n                    rules={[\r\n                        { required: true, message: '请输入密码！' },\r\n                        {min:4,message:'最少4个字符'},\r\n                        {max:10,message:'最多10个字符'}\r\n                    ]}\r\n                >\r\n                    <Input.Password />\r\n                </Form.Item>\r\n\r\n                <Form.Item wrapperCol={{ offset: 6, span: 18 }}>\r\n                    <Button type=\"primary\" htmlType=\"submit\">\r\n                        登录\r\n                    </Button>\r\n                </Form.Item>\r\n            </Form>\r\n        </Content>\r\n    );\r\n})\r\n\r\nexport  default  Component\r\n"],"sourceRoot":""}